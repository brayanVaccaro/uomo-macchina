@model UomoMacchina.Areas.Main.Data.AnnoViewModel
@{
    var today = DateTime.Now;
    var nomeMeseAttuale = today.ToString("MMMM");
}

<nav class="navbar d-flex flex-column justify-content-center bg-body-tertiary">
    @foreach (var mese in Model.Mesi)
    {

        <!--Gli altri mesi non visualizzati-->
        @if (mese.NomeMese == nomeMeseAttuale)
        {
            <div class="mesi d-flex flex-row justify-content-end">

                <div class="col" v-on:click="cambioMese() ">
                    <i class="fa-solid fa-caret-left fa-2x"></i>

                </div>
                <div class="col">
                    <h3 class="m-0">@mese.NomeMese</h3>

                </div>
                <div class="col" v-on:click="cambioMese() ">
                    <i class="fa-solid fa-caret-right fa-2x"></i>
                </div>

            </div>


            <div class="row">
                <ul class="navbar-nav d-flex flex-column col">

                    @foreach (var settimana in mese.Settimane)
                    {
                        <li class="nav-item dropdown col">

                            @if (settimana.Giorni.Contains(today.Date))
                            {
                                @* nome della settimana *@
                                <a class="nav-link show" v-on:click="selezionaSettimana('@settimana.Giorni.FirstOrDefault().ToString("yyyy-MM-dd")')" role="button" data-bs-toggle="dropdown" aria-expanded="true">
                                    @settimana.Nome
                                </a>
                                @* ciclo per generare i giorni delle settimane *@
                                <ul class="dropdown-menu row show" data-bs-popper="static">
                                    @foreach (var giorno in settimana.Giorni)
                                    {
                                        <li class="dropdown-item" v-on:click.stop="selezionaGiorno('@giorno.ToString("yyyy-MM-dd")')">
                                            <a>@giorno.ToString("dddd dd")</a>
                                        </li>
                                    }
                                </ul>
                            }
                            else
                            {
                                <a class="nav-link" v-on:click="selezionaSettimana('@settimana.Giorni.FirstOrDefault().ToString("yyyy-MM-dd")')" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    @settimana.Nome
                                </a>

                                <ul class="dropdown-menu row">
                                    @foreach (var giorno in settimana.Giorni)
                                    {
                                        <li class="dropdown-item" v-on:click.stop="selezionaGiorno('@giorno.ToString("yyyy-MM-dd")')">

                                            <a>@giorno.ToString("dddd dd")</a>
                                            <!-- Aggiungi ulteriori elementi dell'interfaccia utente per ogni giorno qui -->

                                        </li>
                                    }
                                </ul>
                            }
                        </li>
                    }
                </ul>
            </div>
        }
                
    }
</nav>


<!-- Progress Bar -->
<div class="progress-stacked Prototipo" style="display: none">
    <div class="progress" role="progressbar" aria-label="Segment one" aria-valuenow="15" aria-valuemin="0" aria-valuemax="100" style="width: 50%">
        <div class="progress-bar bg-success"></div>
    </div>
    <div class="progress" role="progressbar" aria-label="Segment two" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
        <div class="progress-bar bg-warning"></div>
    </div>
</div>
